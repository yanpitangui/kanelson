@using Kanelson.Actors.Rooms
@using Kanelson.Components.progress
@using Kanelson.Models
@inherits BaseRoomPage

<MudStack>
    <ConnectedUsersComponent ConnectedUsers="ConnectedUsers"/>

    @if (_roomStateMachine != null)
    {
        
        
        @if (CurrentQuestion is not null && _roomStateMachine.IsInState(RoomStatus.Started))
        {
            
            @if (TimerConfig.Enabled)
            {
                <Progress Status="ProgressStatus.Active" Type="ProgressType.Circle"
                          TrailColor="#ff4d4f"
                          Percent="@TimerConfig.Percentage" Format="TimerConfig.Format"></Progress>
            }
            
            
            <QuestionComponent Info="CurrentQuestion"/>
        }

        
        <MudCardActions>
            @if (_roomStateMachine.PermittedTriggers.Contains(RoomTrigger.Start))
            {
                <MudButton @onclick="Start" Color="Color.Primary" 
                           Variant="Variant.Filled"
                           StartIcon="@Icons.Material.Filled.Start">@Loc["StartButton"]</MudButton>
            }
            
        
            @if (_roomStateMachine.PermittedTriggers.Contains(RoomTrigger.DisplayQuestion) && !_roomStateMachine.IsInState(RoomStatus.Finished))
            {
                <MudButton @onclick="NextQuestion" Color="Color.Primary" 
                           Variant="Variant.Filled"
                           StartIcon="@Icons.Material.Filled.SkipNext">@Loc["NextQuestionButton"]</MudButton>
            }
        </MudCardActions>

    }
</MudStack>

